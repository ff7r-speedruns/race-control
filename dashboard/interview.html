<!DOCTYPE html>
<html>
    <head>
        <script src="bundle.js"></script>

        <style>
            paper-button.primary {
                background-color: #00BFA5
            }

            table {
                width: 100%;
            }

            .td-pronouns {
                width: 20%;
            }
        </style>
    </head>
    <body>
        <table>
            <tbody>
                <tr data-index="0">
                    <td class="td-name">
                        <paper-input type="text" label="Name" data-type="name"></paper-input>
                    </td>
                    <td class="td-twitch">
                        <paper-input type="text" label="Twitch" data-type="twitch"></paper-input>
                    </td>
                    <td class="td-pronouns">
                        <paper-input type="text" label="Pronouns" data-type="pronouns"></paper-input>
                    </td>
                </tr>
                <tr data-index="1">
                    <td>
                        <paper-input type="text" label="Name" data-type="name"></paper-input>
                    </td>
                    <td>
                        <paper-input type="text" label="Twitch" data-type="twitch"></paper-input>
                    </td>
                    <td>
                        <paper-input type="text" label="Pronouns" data-type="pronouns"></paper-input>
                    </td>
                </tr>
                <tr data-index="2">
                    <td>
                        <paper-input type="text" label="Name" data-type="name"></paper-input>
                    </td>
                    <td>
                        <paper-input type="text" label="Twitch" data-type="twitch"></paper-input>
                    </td>
                    <td>
                        <paper-input type="text" label="Pronouns" data-type="pronouns"></paper-input>
                    </td>
                </tr>
                <tr data-index="3">
                    <td>
                        <paper-input type="text" label="Name" data-type="name"></paper-input>
                    </td>
                    <td>
                        <paper-input type="text" label="Twitch" data-type="twitch"></paper-input>
                    </td>
                    <td>
                        <paper-input type="text" label="Pronouns" data-type="pronouns"></paper-input>
                    </td>
                </tr>
                <tr data-index="4">
                    <td>
                        <paper-input type="text" label="Name" data-type="name"></paper-input>
                    </td>
                    <td>
                        <paper-input type="text" label="Twitch" data-type="twitch"></paper-input>
                    </td>
                    <td>
                        <paper-input type="text" label="Pronouns" data-type="pronouns"></paper-input>
                    </td>
                </tr>
                <tr data-index="5">
                    <td>
                        <paper-input type="text" label="Name" data-type="name"></paper-input>
                    </td>
                    <td>
                        <paper-input type="text" label="Twitch" data-type="twitch"></paper-input>
                    </td>
                    <td>
                        <paper-input type="text" label="Pronouns" data-type="pronouns"></paper-input>
                    </td>
                </tr>
            </tbody>
        </table>
        <paper-button id="submitButton" class="primary">Update</paper-buttonbutton>
    </body>

<script>
    const interviewReplicant = nodecg.Replicant('interview', {
        defaultValue: []
    });

    submitButton.onclick = () => {
        let value = [];
        document.querySelectorAll('tr[data-index]').forEach((element) => {
            value.push({
                'name': element.querySelector('paper-input[data-type=name]').value,
                'pronouns': element.querySelector('paper-input[data-type=pronouns]').value,
                'twitch': element.querySelector('paper-input[data-type=twitch]').value
            });
        });
        interviewReplicant.value = value;
    }

    interviewReplicant.on('change', (newValue, lastValue) => {
        document.querySelectorAll('tr[data-index]').forEach((element) => {
            if (!newValue) {
                return;
            }
            let index = element.getAttribute('data-index');
            if (newValue[index] == undefined) {
                return;
            }

            element.querySelector('paper-input[data-type=name]').value = newValue[index].name;
            element.querySelector('paper-input[data-type=pronouns]').value = newValue[index].pronouns;
            element.querySelector('paper-input[data-type=twitch]').value = newValue[index].twitch;
        });
    });
</script>
</html>